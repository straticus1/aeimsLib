[supervisord]
nodaemon=true
user=root

[program:websocket]
command=sh -c 'if [ -f "/app/dist/server.js" ]; then node /app/dist/server.js; elif [ -f "/app/src/server.ts" ]; then npm start; else php /app/websocket_server.php; fi'
directory=/app
user=aeims
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/supervisor/websocket.log

[program:nginx]
command=nginx -g "daemon off;"
user=root
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/supervisor/nginx.log